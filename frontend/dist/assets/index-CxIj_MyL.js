import{a as c,b9 as N,aU as a}from"./index-D5NEVckz.js";import{Q,Z as n,X}from"./IdurarOs-V_bURJEp.js";import{u as Z}from"./ErpApp-Ds58W3Mv.js";import{s as _}from"./index-KrFx5yLV.js";import{c as k}from"./color-DHucoY0N.js";import{T as z}from"./index-CO9O4eHP.js";const B=({entity:g,displayLabels:h=["name"],outputValue:t="_id",redirectLabel:v="",withRedirect:x=!1,urlToRedirect:S="/",placeholder:L="select",value:r,onChange:l})=>{var u;const j=Q(),[b,p]=c.useState([]),[E,i]=c.useState(void 0),O=N(),y=()=>X.list({entity:g}),{result:R,isLoading:m,isSuccess:f}=Z(y);c.useEffect(()=>{f&&p(R)},[f]);const U=s=>h.map(e=>s[e]).join(" ");c.useEffect(()=>{if(r!==void 0){const s=r[t]??r;i(s),l(s)}},[r]);const A=s=>{if(s==="redirectURL")O(S);else{const e=s[t]??s;i(s),l(e)}},C=()=>{const s=[];return b.map(e=>{var d;const T=e[t]??e,$=U(e),q=((d=e[t])==null?void 0:d.color)??(e==null?void 0:e.color),o=k.find(I=>I.color===q);s.push({value:T,label:$,color:o==null?void 0:o.color})}),s};return a.jsxs(n,{loading:m,disabled:m,value:E,onChange:A,placeholder:L,children:[(u=C())==null?void 0:u.map(s=>a.jsx(n.Option,{value:s.value,children:a.jsx(z,{bordered:!1,color:s.color,children:s.label})},`${_.generate()}`)),x&&a.jsx(n.Option,{value:"redirectURL",children:"+ "+j(v)})]})},P=B;export{P as S};
